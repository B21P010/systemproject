<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>データ閲覧</title>
        <link rel="stylesheet" href="../css/style.css">
        <link rel="stylesheet" href="../css/nav.css">
        <link rel="stylesheet" href="../css/table.css">
        <link rel="stylesheet" href="../css/table_filter.css">
        <script type="text/javascript" src="../javascript/table_filter.js"></script>
    </head>

    <body>
    <div class="wrapper">
        <header class="header">
            <div class="head">
                <h1 class="title"><a href="select.html">出席管理</a></h1>
                <!--ユーザーIDとログアウト-->
                <ul class="logname">
                <li>ユーザーID：{username}</li>
                <!--パスワード変更リンク-->
                <li id="change_link"><a href="passchange.html">パスワードを変更</a></li>
                <!--id追加-->
                <li id="logout"><a href="password.html">ログアウト</a></li>
                </ul>
                </div>
            <nav class="nav">
                <ul class="main-nav">
                    <li><a href="select.html">講義選択</a></li>
                    <li><a href="view.html">データ閲覧</a></li>
                    <li><a href="time.html">時間設定</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <!--講義名表示-->
            <div class="lec_name">
                <h2>工業数学</h2>
            </div>

            <div class="tabwrap">
                <!--ページ内切り替えの表の部分-->
                <input id="tab1" type="radio" name="TAB" class="tabswitch" checked="checked"><label class="tablabel" for="tab1">表</label>
                <div class="tabbody">
                    <button type="button" class="download">ダウンロード</button>

                    <!--出席データの表-->
                    <table border="1" id="attend">

                            <tr class="FilterBtn">
                                <th id="number">学籍番号</th><th id="name">名前</th>
                                
                                <th class="count">1</th>
                                <th class="count">2</th>
                                <th class="count">3</th>
                                <th class="count">4</th>
                                <th class="count">5</th>
                                <th class="count">6</th>
                                <th class="count">7</th>
                                <th class="count">8</th>
                                <th class="count">9</th>
                                <th class="count">10</th>
                                <th class="count">11</th>
                                <th class="count">12</th>
                                <th class="count">13</th>
                                <th class="count">14</th>
                                <th class="count">15</th>
                                <th class="sum">出席</th>
                                <th class="sum">欠席</th>
                            </tr>

                        <tr><td>A001</td><td>田中 実</td><td>40</td><td>男</td><td>東北</td><td>123</td><td>12</td></tr>
                        <tr><td>A002</td><td>鈴木 茂</td><td>50</td><td>男</td><td>関東</td><td>5,487</td><td>12</td></tr>
                        <tr><td>A003</td><td>佐藤 和子</td><td>66</td><td>女</td><td></td><td>41</td><td>12</td></tr>
                        <tr><td>A004</td><td>ＸＸ商事</td><td></td><td>法人</td><td>関東</td><td>1,156</td><td>12</td></tr>
                        <tr><td>A005</td><td>伊藤 博</td><td>40</td><td>男</td><td>関西</td><td>8</td><td>12</td></tr>
                        <tr><td>A006</td><td>鈴木 洋子</td><td>36</td><td>女</td><td></td><td>753</td><td>12</td></tr>
                        <tr><td>A007</td><td>鈴木 幸子</td><td>25</td><td>女</td><td>東北</td><td>45</td><td>12</td></tr>
                        <tr><td>A008</td><td>田中 博 </td><td>20</td><td>男</td><td>関西</td><td>87</td><td>12</td></tr>
                        <tr><td>A008</td><td>ＹＹ販売</td><td></td><td>法人</td><td>東海</td><td>2,694</td><td>12</td></tr>
                    </table>

                    <!--行数を変動させるスクリプト-->
                    <script>
                        var num = [[1, 2, 3, 4],[1],[3]]

                        len_row = num.length;
                        len_str = num[0].length;

                        let table = document.getElementById('attend');
                        for(var m; m<len_row; m++){
                            let newRow = table.insertRow();
                            let newCell = newRow.insertCell();
                            let newText = document.createTextNode('B21P000');
                            newCell.appendChild(newText);

                            newCell = newRow.insertCell();
                            newText = document.createTextNode('a');
                            newCell.appendChild(newText);

                            for(j=0;j<15;j++)
                            {
                                newCell = newRow.insertCell();
                                newText = document.createTextNode('出席');
                                newCell.appendChild(newText);
                            }

                            var attend = 0;
                            var absend = 0;
        
                            var att_search = 1;
                            var abs_search = 2;
                        
                            for(let n=0; l<len_str; n++){
                                if (att_search == num[m][n]){
                                    attend = attend+1;
                                }else if(abs_search == num[m][n]){
                                      absend = absend+1;
                                }
                            }

                            let newCell = newRow.insertCell();
                            let newText = document.createTextNode(attend);
                            newCell.appendChild(newText);
                            
                            newCell = newRow.insertCell();
                            newText = document.createTextNode(absend);
                            newCell.appendChild(newText);
                        }
                    </script>

                    <!--要注意者リスト-->
                    <table id="attention">
                        <caption class="cap">要注意者リスト</caption>
                        
        
                    </table>
                    
                    <!--欠席回数の探索のスクリプト-->
                    <script>
                         let table = document.getElementById('attention');
                         var num = [[1, 1, 1, 1,1], [1,1, 1, 3, 4], [5,1, 3, 2, 2], [1,1, 2, 2, 3]];
                         len_row = num.length;
                         len_str = num[0].length;

                        var count = 0;
        
                        var num_search = 1;        
                       
                        for(let i=0; i<len_row; i++){  
                            count = 0;                          
                            for(let j=0; j<len_str; j++){
                                if (num_search == num[i][j]){
                                    count = count+1;
                                }else{
                                    ;
                                }
                            }
                            if(count>=3){
                                    let newRow = table.insertRow();
                                    let newCell = newRow.insertCell();
                                    let newText = document.createTextNode("a");
                                    newCell.appendChild(newText);
                            }
                            
                        }
                        
                    </script>
                </div>

                <!--ページ内切り替えのグラフの部分-->
                <input id="tab2" type="radio" name="TAB" class="tabswitch"><label class="tablabel" for="tab2">グラフ</label>
                <div class="tabbody">
                    
                    <button type="button" class="download">ダウンロード</button>

                    <!--グラフ入れるところ-->
                    <div class="graph">

                    </div>
                </div>
            </div>
            
        </main>

        <footer>

        </footer>
    </div>
    </body>
</html>
